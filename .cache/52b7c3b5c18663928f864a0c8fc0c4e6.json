{"dependencies":[{"name":"validate.js"},{"name":"./keys"},{"name":"axios"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _validate = require(\"validate.js\");\n\nvar _keys = require(\"./keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _axios = require(\"axios\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar formMsgs = {\n  success: 'Thanks for Subscribing! Please check your email',\n  error: 'There was an error. Please try again.'\n};\n\nvar urlQuery = function urlQuery(msg) {\n  var url = document.location;\n  var separator = \"?\";\n  var queryString = msg;\n  // url += separator + queryString;\n  var newUrl = url + separator + queryString;\n  window.history.pushState({}, '', newUrl);\n};\n\nvar form = function form() {\n\n  var forms = Array.from(document.querySelectorAll('form'));\n\n  var formFunc = forms.map(function (singleForm) {\n    var email = singleForm.querySelector('.form__input');\n    var formMsg = singleForm.querySelector('.form__msg-container');\n    var formSuccess = formMsg.querySelector('.form__msg--success');\n    var formError = formMsg.querySelector('.form__msg--error');\n\n    singleForm.addEventListener('submit', function (e) {\n      e.preventDefault();\n      var inputEmail = e.target.querySelector('.form__input').value;\n\n      var fetchOptions = {\n        method: 'POST',\n        mode: 'cors',\n        headers: new Headers({\n          'Content-Type': 'application/ json; charset=utf-8',\n          api_key: _keys2.default.api\n        }),\n        body: JSON.stringify({\n          api_key: _keys2.default.api,\n          email_address: inputEmail\n        })\n      };\n\n      var postRequest = new Request(_keys2.default.url + \"/forms/\" + _keys2.default.formId + \"/subscribe\", fetchOptions);\n\n      (0, _axios2.default)({\n        method: 'post',\n        url: _keys2.default.url + \"/forms/\" + _keys2.default.formId + \"/subscribe\",\n        data: {\n          api_key: _keys2.default.api,\n          email: inputEmail\n        }\n      }).then(function (response) {\n        // console.log(formMsgs.success);\n        // console.log(response.data.subscription);\n        formSuccess.innerHTML = \"\" + formMsgs.success;\n        formSuccess.style.display = 'inline-block';\n        singleForm.reset();\n        urlQuery('confirmed=1');\n      }).catch(function (error) {\n        console.log(error);\n        console.log(inputEmail + \" was not entered.\");\n        formError.style.display = 'inline-block';\n        singleForm.reset();\n      });\n    });\n\n    email.addEventListener('blur', function (e) {\n      var val = e.target.value;\n      if (val != \"\") {\n        e.target.classList.add('has-value');\n      } else {\n        e.target.classList.remove('has-value');\n      }\n    });\n  });\n};\n\nexports.default = form;"},"hash":"41d6f77b3ad41dd17dcde76a8e945253"}