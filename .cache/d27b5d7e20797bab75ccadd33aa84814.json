{"dependencies":[{"name":"validate.js","loc":{"line":1,"column":25}},{"name":"./keys","loc":{"line":2,"column":17}},{"name":"axios","loc":{"line":3,"column":18}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _validate = require(\"validate.js\");\n\nvar _keys = require(\"./keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _axios = require(\"axios\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst formMsgs = {\n  success: 'Thanks for Subscribing! Please check your email',\n  error: 'There was an error. Please try again.'\n};\n\nconst urlQuery = msg => {\n  let url = document.location;\n  let separator = `?`;\n  let queryString = msg;\n  // url += separator + queryString;\n  let newUrl = url + separator + queryString;\n  window.history.pushState({}, '', newUrl);\n};\n\nconst form = () => {\n\n  const forms = Array.from(document.querySelectorAll('form'));\n\n  const formFunc = forms.map(singleForm => {\n    let email = singleForm.querySelector('.form__input');\n    let formMsg = singleForm.querySelector('.form__msg-container');\n    let formSuccess = formMsg.querySelector('.form__msg--success');\n    let formError = formMsg.querySelector('.form__msg--error');\n\n    singleForm.addEventListener('submit', e => {\n      e.preventDefault();\n      let inputEmail = e.target.querySelector('.form__input').value;\n\n      const fetchOptions = {\n        method: 'POST',\n        mode: 'cors',\n        headers: new Headers({\n          'Content-Type': 'application/ json; charset=utf-8',\n          api_key: _keys2.default.api\n        }),\n        body: JSON.stringify({\n          api_key: _keys2.default.api,\n          email_address: inputEmail\n        })\n      };\n\n      const postRequest = new Request(`${_keys2.default.url}/forms/${_keys2.default.formId}/subscribe`, fetchOptions);\n\n      (0, _axios2.default)({\n        method: 'post',\n        url: `${_keys2.default.url}/forms/${_keys2.default.formId}/subscribe`,\n        data: {\n          api_key: _keys2.default.api,\n          email: inputEmail\n        }\n      }).then(response => {\n        // console.log(formMsgs.success);\n        // console.log(response.data.subscription);\n        formSuccess.innerHTML = `${formMsgs.success}`;\n        formSuccess.style.display = 'inline-block';\n        singleForm.reset();\n        urlQuery('confirmed=1');\n      }).catch(error => {\n        console.log(error);\n        console.log(`${inputEmail} was not entered.`);\n        formError.style.display = 'inline-block';\n        singleForm.reset();\n      });\n    });\n\n    email.addEventListener('blur', e => {\n      let val = e.target.value;\n      if (val != \"\") {\n        e.target.classList.add('has-value');\n      } else {\n        e.target.classList.remove('has-value');\n      }\n    });\n  });\n};\n\nexports.default = form;"},"hash":"3836a31c1691a24ec4a673e735017df8"}